import{r as u}from"./index.CVf8TyFT.js";var S={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C=u,D=Symbol.for("react.element"),A=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,_=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R={key:!0,ref:!0,__self:!0,__source:!0};function E(e,r,n){var s,c={},h=null,d=null;n!==void 0&&(h=""+n),r.key!==void 0&&(h=""+r.key),r.ref!==void 0&&(d=r.ref);for(s in r)q.call(r,s)&&!R.hasOwnProperty(s)&&(c[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps,r)c[s]===void 0&&(c[s]=r[s]);return{$$typeof:D,type:e,key:h,ref:d,props:c,_owner:_.current}}j.Fragment=A;j.jsx=E;j.jsxs=E;S.exports=j;var t=S.exports;const v=({technology:e,onIncrement:r,onDecrement:n,onDelete:s})=>{const c=()=>{r(e.id)},h=()=>{e.count>0&&n(e.id)},d=()=>{s(e.id)};return t.jsx("div",{className:`technology-item technology-${e.category}`,role:"listitem",children:t.jsxs("div",{className:"technology-content",children:[t.jsx("div",{className:"technology-header",children:t.jsxs("h3",{className:"technology-name",id:`tech-${e.id}`,children:[e.name," (",e.count,")"]})}),t.jsxs("div",{className:"technology-controls",children:[t.jsx("button",{type:"button",className:"btn btn-action btn-increment",onClick:c,"aria-label":`Add 1 to ${e.name} count`,"aria-describedby":`tech-${e.id}`,children:"Add 1"}),t.jsx("button",{type:"button",className:"btn btn-action btn-decrement",onClick:h,disabled:e.count<=1,"aria-label":`Decrease 1 from ${e.name} count`,"aria-describedby":`tech-${e.id}`,children:"Decrease 1"}),t.jsx("button",{type:"button",className:"btn btn-action btn-delete",onClick:d,"aria-label":`Remove ${e.name}`,"aria-describedby":`tech-${e.id}`,children:"Remove"})]})]})})},$=({technologies:e,onIncrement:r,onDecrement:n,onDelete:s,isLoading:c=!1})=>{if(c)return t.jsxs("div",{className:"technology-list-loading",role:"status","aria-live":"polite",children:[t.jsx("div",{className:"loading-spinner","aria-hidden":"true"}),t.jsx("p",{children:"Loading technologies..."})]});if(e.length===0)return t.jsx("div",{className:"technology-list-empty",role:"status",children:t.jsx("p",{children:"No technologies added yet. Add your first technology to get started!"})});const h=e.filter(a=>a.category==="required").sort((a,o)=>o.count!==a.count?o.count-a.count:a.name.localeCompare(o.name)),d=e.filter(a=>a.category==="desirable").sort((a,o)=>o.count!==a.count?o.count-a.count:a.name.localeCompare(o.name)),y=h.reduce((a,o)=>a+o.count,0),p=d.reduce((a,o)=>a+o.count,0);return t.jsxs("div",{className:"technology-list-container",children:[t.jsxs("h2",{className:"technology-list-title",children:["ðŸ“Š Technology Stack (",e.length,")"]}),t.jsxs("div",{className:"technology-categories",children:[t.jsxs("div",{className:"technology-category required-category",children:[t.jsx("h3",{className:"category-title required-title",children:"Required Skills"}),t.jsx("div",{className:"technology-list",role:"list","aria-label":"List of required technologies",children:h.map(a=>t.jsx(v,{technology:a,onIncrement:r,onDecrement:n,onDelete:s},a.id))}),h.length===0&&t.jsx("div",{className:"category-empty",children:t.jsx("p",{children:"No required skills added yet"})})]}),t.jsxs("div",{className:"technology-category desirable-category",children:[t.jsx("h3",{className:"category-title desirable-title",children:"Desirable Skills"}),t.jsx("div",{className:"technology-list",role:"list","aria-label":"List of desirable technologies",children:d.map(a=>t.jsx(v,{technology:a,onIncrement:r,onDecrement:n,onDelete:s},a.id))}),d.length===0&&t.jsx("div",{className:"category-empty",children:t.jsx("p",{children:"No desirable skills added yet"})})]})]}),t.jsx("div",{className:"technology-list-summary",role:"status","aria-live":"polite",children:t.jsxs("p",{children:["Total: ",e.length," | Required: ",h.length," (",y,") | Desirable: ",d.length," (",p,")"]})})]})},I=({onAddTechnology:e,isLoading:r=!1})=>{const[n,s]=u.useState(""),[c,h]=u.useState("required"),[d,y]=u.useState(""),p=l=>{l.preventDefault();const i=n.trim();if(!i){y("Please enter a technology name");return}if(i.length<2){y("Technology name must be at least 2 characters long");return}if(i.length>50){y("Technology name must be less than 50 characters");return}y(""),e({name:i,category:c}),s(""),h("required")},a=l=>{s(l.target.value),d&&y("")},o=l=>{h(l.target.value)};return t.jsxs("form",{className:"add-technology-form",onSubmit:p,"aria-labelledby":"form-title",children:[t.jsx("h2",{id:"form-title",className:"form-title",children:"Add New Technology"}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"technology-name",className:"form-label",children:"Technology Name"}),t.jsx("input",{type:"text",id:"technology-name",name:"technologyName",value:n,onChange:a,className:`form-input ${d?"error":""}`,placeholder:"e.g., React, TypeScript, Node.js","aria-describedby":d?"error-message":void 0,"aria-invalid":d?"true":"false",disabled:r,required:!0}),d&&t.jsx("div",{id:"error-message",className:"error-message",role:"alert",children:d})]}),t.jsx("div",{className:"form-group",children:t.jsxs("fieldset",{className:"category-fieldset",children:[t.jsx("legend",{className:"form-label",id:"category-legend",children:"Category"}),t.jsxs("div",{className:"category-options",role:"radiogroup","aria-labelledby":"category-legend",children:[t.jsxs("label",{className:"category-option",id:"required-option",children:[t.jsx("input",{type:"radio",name:"category",value:"required",checked:c==="required",onChange:o,disabled:r,"aria-describedby":"required-option"}),t.jsx("span",{className:"radio-custom required-radio","aria-hidden":"true"}),t.jsx("span",{className:"category-label",children:"Required"})]}),t.jsxs("label",{className:"category-option",id:"desirable-option",children:[t.jsx("input",{type:"radio",name:"category",value:"desirable",checked:c==="desirable",onChange:o,disabled:r,"aria-describedby":"desirable-option"}),t.jsx("span",{className:"radio-custom desirable-radio","aria-hidden":"true"}),t.jsx("span",{className:"category-label",children:"Desirable"})]})]})]})}),t.jsx("button",{type:"submit",className:"btn btn-primary",disabled:r||!n.trim(),"aria-describedby":"submit-help",style:{width:"100%"},children:r?"Adding...":"Add Technology"}),t.jsx("div",{id:"submit-help",className:"help-text",children:"Tab: Input â†’ Required â†’ Desirable â†’ Add Technology. Press Enter or click to add (starts with count 1)"})]})},k="cv-offers-technologies",x=()=>{if(typeof window>"u")return[];try{const e=sessionStorage.getItem(k);return e?JSON.parse(e).map(n=>({...n,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)})):[]}catch(e){return console.error("Error reading from session storage:",e),[]}},N=e=>{if(!(typeof window>"u"))try{sessionStorage.setItem(k,JSON.stringify(e))}catch(r){console.error("Error saving to session storage:",r)}},O=e=>{const n=[...x(),e];return N(n),n},w=(e,r)=>{const s=x().map(c=>c.id===e?{...c,count:r,updatedAt:new Date}:c);return N(s),s},F=e=>{const n=x().filter(s=>s.id!==e);return N(n),n},f="/api/technologies",b={async getTechnologies(){try{const e=await fetch(f);if(!e.ok)throw new Error("Failed to fetch technologies");return await e.json()}catch(e){return console.error("Error fetching technologies:",e),[]}},async createTechnology(e){try{const r=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw new Error("Failed to create technology");return await r.json()}catch(r){return console.error("Error creating technology:",r),null}},async updateTechnology(e){try{const r=await fetch(`${f}/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({count:e.count})});if(!r.ok)throw new Error("Failed to update technology");return await r.json()}catch(r){return console.error("Error updating technology:",r),null}},async deleteTechnology(e){try{if(!(await fetch(`${f}/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete technology");return!0}catch(r){return console.error("Error deleting technology:",r),!1}},async syncTechnologies(e){try{if(!(await fetch(`${f}/sync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({technologies:e})})).ok)throw new Error("Failed to sync technologies");return!0}catch(r){return console.error("Error syncing technologies:",r),!1}}},J=()=>{const[e,r]=u.useState([]),[n,s]=u.useState(!1),[c,h]=u.useState("idle");u.useEffect(()=>{const o=x();r(o)},[]),u.useEffect(()=>{const l=setInterval(async()=>{if(e.length!==0){h("syncing");try{const i=await b.syncTechnologies(e);h(i?"success":"error")}catch(i){console.error("Sync failed:",i),h("error")}}},3e4);return()=>clearInterval(l)},[e]);const d=u.useCallback(async o=>{s(!0);try{const l={id:crypto.randomUUID(),name:o.name,count:1,category:o.category,createdAt:new Date,updatedAt:new Date},i=O(l);r(i);const m=await b.createTechnology(o);if(m){const g=i.map(T=>T.id===l.id?{...T,id:m.id}:T);r(g),N(g)}}catch(l){console.error("Error adding technology:",l)}finally{s(!1)}},[]),y=u.useCallback(async o=>{const l=e.find(g=>g.id===o);if(!l)return;const i=l.count+1,m=w(o,i);r(m);try{await b.updateTechnology({id:o,count:i})}catch(g){console.error("Error updating technology:",g)}},[e]),p=u.useCallback(async o=>{const l=e.find(g=>g.id===o);if(!l||l.count<=0)return;const i=l.count-1,m=w(o,i);r(m);try{await b.updateTechnology({id:o,count:i})}catch(g){console.error("Error updating technology:",g)}},[e]),a=u.useCallback(async o=>{const l=F(o);r(l);try{await b.deleteTechnology(o)}catch(i){console.error("Error deleting technology:",i)}},[]);return t.jsxs("div",{className:"technology-tracker",children:[t.jsxs("header",{className:"app-header",children:[t.jsx("h1",{className:"app-title",children:"Job Search Technology Tracker"}),t.jsx("p",{className:"app-description",children:"Track technologies from job postings and monitor their frequency"}),c!=="idle"&&t.jsxs("div",{className:`sync-status sync-${c}`,role:"status","aria-live":"polite",children:[c==="syncing"&&"Syncing with database...",c==="success"&&"Data synced successfully",c==="error"&&"Sync failed - data saved locally"]})]}),t.jsxs("main",{className:"app-main",children:[t.jsx(I,{onAddTechnology:d,isLoading:n}),t.jsx($,{technologies:e,onIncrement:y,onDecrement:p,onDelete:a,isLoading:n})]})]})};export{J as TechnologyTracker};
